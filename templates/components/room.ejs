<%- include('header') %>
<div class="container mt-2">
    <h1 class="display-4">Welcome in <em class="text-success"><%= room.name %></em></h1>
    <span class="badge badge-pill badge-dark">Users connected : <span id="users_in" class="value font-italic"></span></span>
    <hr>
    <article class="row" style="">
        <div id="messages_wrapper_wrapper" class="col col-8 p-3 border rounded" style="height: 20rem; overflow: auto auto">
            <div id="messages_wrapper" class="pt-3">
                <% for(let i = 0; i < messages.length; i++){ %>
                    <div class="msgWrapper p-3 <%= messages[i].youreauthor ? 'ml-auto text-light bg-primary' : 'mr-auto bg-light' %> mb-3" style="max-width: 25rem">
                        <div class="msgHeader d-flex border-bottom pb-2">
                            <strong class=""><%= messages[i].username %></strong>
                            <small class="ml-auto"><%- getDateSince(messages[i].created_at) %></small>
                        </div>
                        <div class="msgBody pt-2">
                            <%= messages[i].content %>
                        </div>
                    </div>
                <% } %>
            </div>
        </div>
        <div class="col col-4 p-3">
            <textarea id="message_content" class="form-control" name="message" id="message" cols="30" rows="10" placeholder="Type your message here..."></textarea>
            <button id="create_message" class="btn btn-success w-100 mt-2">Send</button>
        </div>
    </article>

</div>
<script src="/socket.io/socket.io.js"></script>
<script src="/room.js"></script>
